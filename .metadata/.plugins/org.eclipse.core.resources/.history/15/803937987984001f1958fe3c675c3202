package org.riss.bizconnect.hr.retire.model.controller;

import java.util.List;

import org.riss.bizconnect.hr.retire.model.dto.Retire;
import org.riss.bizconnect.hr.retire.model.service.RetireService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;

@Controller
@RequestMapping("/retiree") // /retiree 경로로 들어오는 요청을 처리
public class RetireController {

    @Autowired
    private RetireService retireeService;

    // 퇴직자 목록 조회
    @RequestMapping("/list.do", method = RequestMethod.GET)
    public String getRetireeList(Model model) {
        List<Retire> retireeList = retireeService.getRetireeList(); // 퇴직자 목록을 서비스에서 가져옴
        model.addAttribute("retireeList", retireeList); // 모델에 목록 추가
        return "retireeList"; // retireeList.jsp로 이동
    }

    // 퇴직자 추가 폼 페이지
    @RequestMapping("/addForm.do", method = RequestMethod.GET)
    public String addRetireeForm() {
        return "retireeAdd"; // retireeAdd.jsp로 이동
    }

    // 퇴직자 추가 처리
    @RequestMapping("/add.do", method = RequestMethod.POST)
    public String addRetiree(Retire retiree) {
        retireeService.addRetiree(retiree); // 퇴직자 추가
        return "redirect:/retiree/list.do"; // 추가 후 퇴직자 목록으로 리다이렉트
    }

    // 퇴직자 수정
    @RequestMapping("/update.do", method = RequestMethod.POST)
    public String updateRetiree(Retire retiree) {
        retireeService.updateRetiree(retiree); // 퇴직자 정보 수정
        return "redirect:/retiree/list.do"; // 수정 후 퇴직자 목록으로 리다이렉트
    }

    // 퇴직자 삭제
    @RequestMapping("/retiredelete.do", method = RequestMethod.POST)
    public String deleteRetiree(@RequestParam("retireId") String retireId) {
        retireeService.deleteRetiree(retireId); // 퇴직자 삭제
        return "redirect:/retiree/list.do"; // 삭제 후 퇴직자 목록으로 리다이렉트
    }
}
