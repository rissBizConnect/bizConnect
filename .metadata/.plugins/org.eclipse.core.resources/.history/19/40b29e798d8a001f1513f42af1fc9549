package org.riss.bizconnect.hr.retire.model.service;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.time.temporal.ChronoUnit;
import java.util.ArrayList;

import org.riss.bizconnect.common.model.dto.Paging;
import org.riss.bizconnect.hr.retire.model.dao.RetireDAO;
import org.riss.bizconnect.hr.retire.model.dto.Retire;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service("retireService")
public class RetireServiceImpl implements RetireService {
    
	@Autowired
	private RetireDAO retireDAO;
	
	

	    @Override
	    public void insertRetire(Retire retire) {
	        retireDAO.insertRetire(retire);
	    }

	    @Override
	    public Retire selectRetireByRetNo(String retNo) {
	        return retireDAO.selectRetireByRetNo(retNo);
	    }

	    @Override
	    public void updateRetire(Retire retire) {
	        retireDAO.updateRetire(retire);
	    }

	    @Override
	    public void deleteRetire(String retNo) {
	        retireDAO.deleteRetire(retNo);
	    }

		@Override
		public int selectRetireCount(Retire retire) {
			return retireDAO.selectRetireCount(retire);
		}

		@Override
		public ArrayList<Retire> selectRetireList(Paging paging) {
			return retireDAO.selectRetireList(paging);
		}

		private static final DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy-MM-dd");

	    @Override
	    public String calculateTotalWorkDays(String entryDateStr, String retireDateStr) {
	        // String -> LocalDate로 변환
	        LocalDate entryDate = LocalDate.parse(entryDateStr, formatter);
	        LocalDate retireDate = LocalDate.parse(retireDateStr, formatter);

	        // 총 근무일 계산
	        long totalWorkDays = ChronoUnit.DAYS.between(entryDate, retireDate);

	        // 총 근무일을 String으로 변환하여 반환
	        return String.valueOf(totalWorkDays);
	    }

 
	
}
