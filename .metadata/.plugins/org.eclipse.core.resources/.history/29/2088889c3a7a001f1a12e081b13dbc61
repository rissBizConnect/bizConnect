package org.myweb.first.test.controller;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.http.HttpServletResponse;

import org.myweb.first.test.model.service.TestService;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class TestController {
	//이 컨트롤러의 메소드들이 잘 구동되는지, 값이 잘 전달 또는 리턴 받았는지 확인하기 위한 로그 객체 생성
	private static final Logger logger = LoggerFactory.getLogger(TestController.class);

	@Autowired
	private TestService testService;
	
	//뷰 페이지 이동 처리용 메소드 --------------------------------------------------------
	@RequestMapping("moveAjax.do")
	public String moveAjaxPage() {
		return "test/testAjaxView";
	}
	
	
	//**************************************************************
	//ajax 요청 처리용 메소드 작성부
	//ajax (Asynchronous JavaScript And Xml)
	//자바스크립트와 xml을 이용한 비동기식 네트워크 통신 방식임 : 별도의 입출력 스트림을 가짐
	@RequestMapping("test1.do")
	public void test1(HttpServletResponse response) throws IOException {
		//클라이언트로 부터 요청이 오면, 처리 결과로 문자열값을 별도의 스트림을 통해서 내보냄
		
		//서비스 메소드 실행하고 결과받기 (생략)
		
		//클라이언트로 내보낼 출력스트림 생성
		//문자값 전송시에는 mimiType 설정 생략해도 됨 : 
		//response.setContentType("text/html; charset=utf-8");
		PrintWriter out = response.getWriter();
		
		out.append("served at : /first");
		out.flush();
		
		out.close();
	}
	
}
