<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
 "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="attendanceMapper">
<!-- 	 <resultMap type="Member" id="reultMember">
		<result property="gId" column="GID" />
		<result property="comCode" column="COM_CODE" />
		<result property="userPW" column="USER_PW" />
		<result property="userName" column="USER_NAME" />
		<result property="userJob" column="USER_JOB" />
		<result property="userRegNo" column="USER_REGNO" />
		<result property="userPhone" column="USER_PHONE" />
		<result property="userEmail" column="USER_EMAIL" />
		<result property="userAddr" column="USER_ADDR" />
		<result property="userEntry" column="USER_ENTRY_DATE" />
		<result property="userPay" column="USER_PAY" />
		<result property="userContract" column="USER_CONTRACT" />
		<result property="userAccount" column="USER_ACCOUNT" />
		<result property="userCard" column="USER_CARD" />
		<result property="userRole" column="USER_ROLE" />
		<result property="userFacePictPath" column="USER_PICTURE" />
	</resultMap> -->

	<resultMap type="GooutTime" id="reultGooutTime">
		<result property="day" column="GOOUTWORK_DATE" />
		<result property="goDate" column="GOOUTWORK_GOD" />
		<result property="outDate" column="GOOUTWORK_OUTD" />
		<result property="time" column="GOOUTWORK_TIME" />
	</resultMap>

	<select id="selectTodayGOTime" parameterType="Member" resultMap="reultGooutTime">
		select *
		from  tb_gooutwork
		where gooutwork_date = to_date(sysdate,'yy-MM-dd')
	</select>
	

	<insert id="insertGOTime" parameterType="Member">
		INSERT INTO TB_GOOUTWORK (GOOUTWORK_DATE, GOOUTWORK_GOD, GOOUTWORK_OUTD, GOOUTWORK_TIME, GID, COM_CODE) 
		VALUES(to_date(sysdate,'yy-MM-dd') , NULL, NULL, NULL, #{gId}, #{comCode})
	</insert>
	
	<update id="updateGoD" parameterType="Member">
		update tb_gooutwork
		set GOOUTWORK_god = systimestamp
		where gid = #{ gId } and com_code = #{ comCode } and  to_date(gooutwork_date,'yy-MM-dd') = to_date(sysdate,'yy-MM-dd')
	</update>
	
	<update id="updateOutD" parameterType="Member">
		update tb_gooutwork
		set GOOUTWORK_outd = systimestamp
		where gid = #{ gId } and com_code = #{ comCode } and gooutwork_date =  to_date(gooutwork_date,'yy-MM-dd') = to_date(sysdate,'yy-MM-dd')
	
	</update>
</mapper>
