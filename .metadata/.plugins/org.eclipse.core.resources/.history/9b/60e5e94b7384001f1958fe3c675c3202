package org.riss.bizconnect.hr.retire.model.controller;

import java.util.List;

import org.riss.bizconnect.hr.retire.model.dto.Retire;
import org.riss.bizconnect.hr.retire.model.service.RetireService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;

@Controller
public class RetireController {

	 @Autowired
	    private RetireService retireService;
	 
	   @RequestMapping("/retireeList")
	    public String getRetireeList(
	    		@RequestParam(value = "entryYear", required = false) String entryYear,
	            @RequestParam(value = "retireYear", required = false) String retireYear,
	            @RequestParam(value = "retType", required = false) String retType,
	            Model model) {

	        List<Retire> retireeList = retireService.getRetireeList(entryYear, retireYear, retType);
	        model.addAttribute("retireeList", retireeList);

	        return "retireeList";
	    }

	    @RequestMapping("/retireeAdd")
	    public String addRetiree(
	    		@ModelAttribute Retire retiree) {
	        retireService.addRetiree(retiree);
	        return "redirect:/retiree/retireeList";
	    }

	    @RequestMapping("/retireeEdit")
	    public String updateRetireeForm(
	    		@RequestParam("id") int retireId, Model model) {
	        // 조회 후 retiree 정보 가져오기 (service/dao에서 처리)
	        // model.addAttribute("retiree", retiree);
	        return "retireeEdit";
	    }

	    @RequestMapping("/retireeUpdate")
	    public String updateRetire(@ModelAttribute Retire retiree) {
	        retireService.updateRetire(retiree);
	        return "redirect:/retiree/retireeList";
	    }

	    @RequestMapping("/retireeDelete")
	    public String deleteRetire(@RequestParam("id") int retireId) {
	        retireService.deleteRetire(retireId);
	        return "redirect:/retiree/retireeList";
	    }
	}
