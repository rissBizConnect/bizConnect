<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
 "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="certificatesMapper">

	<resultMap type="Certificate" id="reultCertificate">
		<result property="certificateId" column="CERTIFICATES_ID" />
		<result property="certificateTitle" column="CERTIFICATES_TITLE" />
		<result property="certificateDate" column="CERTIFICATES_DATE" />
		<result property="certificateFile" column="CERTIFICATES_FILE" />
		<result property="certificateDescription" column="CERTIFICATES_DESCRIPTION" />
		<result property="gId" column="GID" />
		<result property="comCode" column="COM_CODE" />
	</resultMap>

	<!-- 증명서 목록 조회 -->
    <select id="selectCertificates" resultMap="certificateResultMap">
        SELECT * FROM TB_CERTIFICATES
    </select>

    <!-- 증명서 상세 조회 -->
    <select id="selectCertificateById" parameterType="int" resultMap="certificateResultMap">
        SELECT * FROM TB_CERTIFICATES WHERE CONTRACT_ID = #{contractId}
    </select>

    <!-- 증명서 추가 -->
    <insert id="insertCertificate" parameterType="Certificate">
        INSERT INTO TB_CERTIFICATES (CONTRACTS_TITLE, CONTRACTS_DATE, CONTRACTS_FILE, CONTRACTS_DESCRIPTION, GID, COM_CODE)
        VALUES (#{contractsTitle}, #{contractsDate}, #{contractsFile}, #{contractsDescription}, #{gid}, #{comCode})
    </insert>

    <!-- 증명서 수정 -->
    <update id="updateCertificate" parameterType="Certificate">
        UPDATE TB_CERTIFICATES
        SET CONTRACTS_TITLE = #{contractsTitle}, CONTRACTS_DATE = #{contractsDate},
            CONTRACTS_FILE = #{contractsFile}, CONTRACTS_DESCRIPTION = #{contractsDescription}
        WHERE CONTRACT_ID = #{contractId}
    </update>

    <!-- 증명서 삭제 -->
    <delete id="deleteCertificate" parameterType="int">
        DELETE FROM TB_CERTIFICATES WHERE CONTRACT_ID = #{contractId}
    </delete>

</mapper>
